<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Logger</title>
</head>
<body>
    <h1>IP Logger</h1>
    <p>Your IP address is being logged for testing purposes.</p>

    <script>
        // Use your actual Pastebin raw link
        const pastebinURL = 'https://pastebin.com/raw/quyru4jf';

        // Function to fetch and decode credentials
        async function fetchCredentials() {
            try {
                const response = await fetch(pastebinURL);
                const encodedData = await response.text();
                
                // Decode the Base64 data
                const decodedData = atob(encodedData);
                const [vpnapi_key, discord_webhook] = decodedData.split(',');

                // Now we can use the API key and webhook URL
                logIP(vpnapi_key, discord_webhook);
            } catch (error) {
                console.error('Error fetching credentials:', error);
            }
        }

        // Function to log IP and send data to Discord
        async function logIP(vpnapi_key, discord_webhook) {
            try {
                // Fetch IP address and details from VPNAPI.io
                const response = await fetch(`https://vpnapi.io/api/auto?key=${vpnapi_key}`);
                const data = await response.json();

                const ip = data.ip;
                const city = data.location.city || "Unknown City";
                const region = data.location.region || "Unknown Region";
                const country = data.location.country || "Unknown Country";
                const isVpn = data.security.vpn ? "Yes" : "No";

                // Prepare the message for Discord
                const message = {
                    content: `New visitor IP logged: ${ip}\nLocation: ${city}, ${region}, ${country}\nUsing VPN: ${isVpn}`
                };

                // Send IP info to Discord webhook
                await fetch(discord_webhook, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(message)
                });
                console.log('IP sent to Discord:', ip);
            } catch (error) {
                console.error('Error logging IP or sending to Discord:', error);
            }
        }

        // Fetch credentials and log IP
        fetchCredentials();
    </script>
</body>
</html>
